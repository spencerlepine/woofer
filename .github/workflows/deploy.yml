name: deploy

on:
  workflow_call:

jobs:

  # check-github-secrets:
  #  name: Verify Secrets Exist
  #  runs-on: ubuntu-latest
  #  outputs:
  #    have_secrets: ${{ steps.setvar.outputs.have_secrets }}
  #  steps:
  #    - name: ♻️ Check out Git Repository
  #       uses: actions/checkout@v2
  #       with:
  #         persist-credentials: false

  #    - id: setvar
  #      run: |
  #        if [[ "${{ secrets.EC2_SSH_KEY }}" != "" && \
  #              "${{ secrets.EC2_REMOTE_HOST }}" != "" && \
  #              "${{ secrets.EC2_REMOTE_USER }}" != "" ]]; \
  #        then
  #          echo "Secrets need to deploy were configured in the repo"
  #          echo "::set-output name=have_secrets::true"
  #        else
  #          echo "Secrets need to deploy were not configured in the repo"
  #          echo "::set-output name=have_secrets::false"
  #          run: exit 1
  #        fi

  # deploy:
    # needs: [build]
    # if: needs.check-registry-secrets.outputs.have_secrets == 'true'

  deploy:
    name: EC2 Deploy
    runs-on: ubuntu-latest
    steps:
       - name: ♻️ Check out Git Repository
        uses: actions/checkout@v2
        with:
          persist-credentials: false

        - name: TODO
          run: echo "TODO"
      # - name: Deploy to EC2 Server
      #   uses: easingthemes/ssh-deploy@main
      #   env:
      #     SSH_PRIVATE_KEY: ${{ secrets.EC2_SSH_KEY }}
      #     REMOTE_HOST: ${{ secrets.HOST_DNS }}
      #     REMOTE_USER: ${{ secrets.USERNAME }}
      #     TARGET: ${{ secrets.TARGET_DIR }}
